v {xschem version=3.4.6RC file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
T {Ir = Vdd - 2Vbe / R} -60 -260 0 0 0.2 0.2 {}
N 190 -190 190 -170 {lab=#net1}
N 330 -190 330 -170 {lab=#net1}
N 190 -170 330 -170 {lab=#net1}
N 260 -80 260 -50 {lab=Iref_mirror}
N -30 -180 -30 -50 {lab=#net2}
N -150 30 260 30 {lab=#net3}
N 260 10 260 30 {lab=#net3}
N -30 10 -30 30 {lab=#net3}
N -150 -520 260 -520 {lab=Vout1}
N -30 -520 -30 -330 {lab=Vout1}
N 10 -20 220 -20 {lab=#net2}
N 120 -300 190 -300 {lab=Vout1}
N -800 -400 -800 -370 {lab=GND}
N -970 -400 -970 -370 {lab=GND}
N -800 -500 -800 -460 {lab=VPulse}
N -970 -500 -970 -460 {lab=VSin}
N 90 -220 150 -220 {lab=Inv}
N 370 -220 430 -220 {lab=NonInv}
N 190 -220 210 -220 {lab=#net1}
N 210 -220 210 -180 {lab=#net1}
N 190 -180 210 -180 {lab=#net1}
N 310 -220 330 -220 {lab=#net1}
N 310 -220 310 -180 {lab=#net1}
N 310 -180 330 -180 {lab=#net1}
N -40 -20 -30 -20 {lab=#net3}
N -40 -20 -40 20 {lab=#net3}
N -40 20 -30 20 {lab=#net3}
N 260 20 270 20 {lab=#net3}
N 270 -20 270 20 {lab=#net3}
N 260 -20 270 -20 {lab=#net3}
N -300 -560 -300 -520 {lab=Inv}
N -30 -270 -30 -180 {lab=#net2}
N 260 -90 260 -80 {lab=Iref_mirror}
N 260 -170 260 -150 {lab=#net1}
N 400 -520 400 -440 {lab=Vout1}
N 330 -440 400 -440 {lab=Vout1}
N 330 -440 330 -420 {lab=Vout1}
N 400 -440 470 -440 {lab=Vout1}
N 470 -440 470 -420 {lab=Vout1}
N 330 -360 330 -250 {lab=#net4}
N 370 -390 430 -390 {lab=#net4}
N 260 -520 400 -520 {lab=Vout1}
N 190 -520 190 -250 {lab=Vout1}
N -470 -420 -470 -380 {lab=GND}
N -300 -410 -300 -390 {lab=GND}
N -300 -390 -300 -380 {lab=GND}
N -470 -520 -470 -480 {lab=#net5}
N -470 -520 -410 -520 {lab=#net5}
N -350 -520 -300 -520 {lab=Inv}
N -300 -520 -300 -470 {lab=Inv}
N -470 -130 -470 -80 {lab=GND}
N -300 -270 -300 -230 {lab=NonInv}
N -350 -220 -300 -220 {lab=NonInv}
N -300 -230 -300 -220 {lab=NonInv}
N -470 -220 -470 -190 {lab=#net6}
N -470 -220 -410 -220 {lab=#net6}
N 400 -220 400 -120 {lab=NonInv}
N 770 -160 770 10 {lab=#net3}
N 770 -270 770 -220 {lab=Vout2}
N 770 -250 840 -250 {lab=Vout2}
N 840 -250 840 -120 {lab=Vout2}
N 400 -520 760 -520 {lab=Vout1}
N 760 -520 770 -520 {lab=Vout1}
N 700 -300 730 -300 {lab=#net7}
N 700 -300 700 -190 {lab=#net7}
N 700 -190 730 -190 {lab=#net7}
N 840 -250 910 -250 {lab=Vout2}
N 770 -520 770 -460 {lab=Vout1}
N 770 -400 770 -330 {lab=#net8}
N -30 -100 50 -100 {lab=#net2}
N 50 -100 50 -70 {lab=#net2}
N 50 -70 50 -20 {lab=#net2}
N 400 -120 440 -120 {lab=NonInv}
N 500 -120 840 -120 {lab=Vout2}
N 770 -190 790 -190 {lab=#net3}
N 790 -190 790 -150 {lab=#net3}
N 770 -150 790 -150 {lab=#net3}
N 580 -220 600 -220 {lab=#net9}
N 580 -250 590 -250 {lab=#net9}
N 590 -250 590 -220 {lab=#net9}
N 580 -290 580 -280 {lab=#net7}
N 580 -290 640 -290 {lab=#net7}
N 640 -290 640 -250 {lab=#net7}
N 260 30 770 30 {lab=#net3}
N 770 10 770 30 {lab=#net3}
N 640 -190 640 30 {lab=#net3}
N 640 -270 700 -270 {lab=#net7}
N 640 -220 660 -220 {lab=#net3}
N 660 -220 660 -180 {lab=#net3}
N 640 -180 660 -180 {lab=#net3}
N 640 -520 640 -420 {lab=Vout1}
N 640 -360 640 -290 {lab=#net7}
N -90 -410 -90 -360 {lab=#net10}
N -90 -520 -90 -470 {lab=Vout1}
N -90 -360 -90 -280 {lab=#net10}
N -90 -220 -90 30 {lab=#net3}
N -180 30 -150 30 {lab=#net3}
N -180 -520 -150 -520 {lab=Vout1}
N 330 -340 390 -340 {lab=#net4}
N 390 -390 390 -340 {lab=#net4}
N 470 -290 480 -290 {lab=#net11}
N 470 -360 470 -290 {lab=#net11}
N 540 -290 540 -250 {lab=#net12}
N -180 60 -180 70 {lab=#net3}
N -180 130 -180 150 {lab=GND}
N -220 -380 -220 -360 {lab=GND}
N -220 -520 -220 -440 {lab=Vout1}
N -220 -520 -180 -520 {lab=Vout1}
N -180 30 -180 60 {lab=#net3}
C {sky130_fd_pr/nfet_01v8_nf.sym} 170 -220 0 0 {name=M1
W=1
L=0.15
nf=1 
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'"
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'"
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 240 -20 0 0 {name=M6
W=8
L=0.15
nf=1 
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'"
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'"
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
w}
C {lab_pin.sym} 120 -300 0 0 {name=p1 sig_type=std_logic lab=Vout1}
C {vsource.sym} -800 -430 0 0 {name=V2 value="PULSE(0 5 1n 1n 1n 10n 20n)" savecurrent=false}
C {vsource.sym} -970 -430 0 0 {name=V3 value="SIN(0 5 1G 1n 0 0)" savecurrent=false}
C {gnd.sym} -970 -370 0 0 {name=l2 lab=GND}
C {gnd.sym} -800 -370 0 0 {name=l3 lab=GND}
C {code.sym} -910 -210 0 0 {name=Differential Amplifier only_toplevel=false value="

.lib /usr/local/share/xschem/xschem_library/devices/sky130A/libs.tech/ngspice/sky130.lib.spice tt"

.control
	tran 1n 100n


	;V2 1 0 PULSE(0 5 1n 1n 1n 10n 20n)
	;V3 2 0 SIN(0 5 1Meg 1n 0 0)
	plot v(Vout1)
	plot v(Vout2)

.endc



.save all

"}
C {code_shown.sym} -900 -30 0 0 {name=code only_toplevel=false value="

.options savecurrents
.tran 100ps 100ns
.save all

"}
C {lab_pin.sym} -800 -500 1 0 {name=p3 sig_type=std_logic lab=VPulse}
C {lab_pin.sym} -970 -500 1 0 {name=p4 sig_type=std_logic lab=VSin
}
C {lab_pin.sym} 90 -220 0 0 {name=p5 sig_type=std_logic lab=Inv}
C {lab_pin.sym} 430 -220 2 0 {name=p6 sig_type=std_logic lab=NonInv
}
C {sky130_fd_pr/nfet_01v8_nf.sym} -10 -20 0 1 {name=M5
W=1
L=0.15
nf=1 
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'"
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'"
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 350 -220 0 1 {name=M4
W=1
L=0.15
nf=1 
mult=1
ad="'int((nf+1)/2) * W / nf * 0.29'"
pd="'2*int((nf+1)/2) * (W / nf + 0.29)'"
as="'int((nf+2)/2) * W / nf * 0.29'"
ps="'2*int((nf+2)/2) * (W / nf + 0.29)'"
nrd="'0.29 / W '" nrs="'0.29 / W '"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {vsource.sym} -470 -160 0 0 {name=V4 value="SIN(0 5 1G 1n 0 0)" savecurrent=false}
C {gnd.sym} -470 -80 0 0 {name=l4 lab=GND}
C {vsource.sym} -470 -450 0 0 {name=V5 value="SIN(0 5 1G 0.5n 0 0)" savecurrent=false}
C {gnd.sym} -470 -380 0 0 {name=l5 lab=GND}
C {lab_pin.sym} -300 -560 1 0 {name=p8 sig_type=std_logic lab=Inv
}
C {lab_wire.sym} 260 -60 0 0 {name=p9 sig_type=std_logic lab=Iref_mirror}
C {res.sym} -30 -300 0 0 {name=R3
value=1
footprint=1206
device=resistor
m=1}
C {gnd.sym} -300 -380 0 0 {name=l6 lab=GND}
C {res.sym} -300 -440 0 0 {name=R1
value=1
footprint=1206
device=resistor
m=1}
C {res.sym} -380 -520 1 0 {name=R4
value=1
footprint=1206
device=resistor
m=1}
C {res.sym} -380 -220 1 0 {name=R5
value=1
footprint=1206
device=resistor
m=1}
C {lab_pin.sym} -300 -270 1 0 {name=p7 sig_type=std_logic lab=NonInv
}
C {res.sym} 470 -120 1 0 {name=R6
value=1
footprint=1206
device=resistor
m=1}
C {lab_pin.sym} 910 -250 2 0 {name=p2 sig_type=std_logic lab=Vout2}
C {res.sym} 770 -430 0 0 {name=R7
value=1
footprint=1206
device=resistor
m=1}
C {sky130A/libs.tech/xschem/sky130_fd_pr/npn_05v5.sym} 750 -190 0 0 {name=Q1
model=npn_05v5_w1p00l2p00 m=1
spiceprefix=X
}
C {res.sym} 260 -120 0 0 {name=R2
value=1
footprint=1206
device=resistor
m=1}
C {sky130A/libs.tech/xschem/sky130_fd_pr/pnp_05v5.sym} 450 -390 0 0 {name=Q3
model=pnp_05v5_W3p40L3p40
m=4
spiceprefix=X
<ALL>`=""}
C {sky130A/libs.tech/xschem/sky130_fd_pr/pnp_05v5.sym} 750 -300 0 0 {name=Q5
model=pnp_05v5_W3p40L3p40
m=1
spiceprefix=X
}
C {sky130A/libs.tech/xschem/sky130_fd_pr/pnp_05v5.sym} 350 -390 0 1 {name=Q6
model=pnp_05v5_W3p40L3p40
m=1
spiceprefix=X
}
C {sky130A/libs.tech/xschem/sky130_fd_pr/npn_05v5.sym} 560 -250 0 0 {name=Q2
model=npn_05v5_w1p00l2p00 m=1
spiceprefix=X
}
C {sky130A/libs.tech/xschem/sky130_fd_pr/npn_05v5.sym} 620 -220 0 0 {name=Q4
model=npn_05v5_w1p00l2p00 m=1
spiceprefix=X
}
C {res.sym} 640 -390 0 0 {name=R8
value=1
footprint=1206
device=resistor
m=1}
C {res.sym} -90 -440 0 0 {name=R9
value=1
footprint=1206
device=resistor
m=1}
C {res.sym} -90 -250 0 0 {name=R10
value=1
footprint=1206
device=resistor
m=1}
C {res.sym} 510 -290 1 0 {name=R11
value=1
footprint=1206
device=resistor
m=1}
C {vsource.sym} -180 100 0 0 {name=V6 value=-5 savecurrent=false}
C {gnd.sym} -180 150 0 0 {name=l1 lab=GND}
C {vsource.sym} -220 -410 0 0 {name=V1 value=5 savecurrent=false}
C {gnd.sym} -220 -360 0 0 {name=l7 lab=GND}
